<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat Features Test - Paxi iTechnologies</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .test-container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
        }
        
        h1 {
            color: #667eea;
            margin-bottom: 10px;
            font-size: 2rem;
        }
        
        .subtitle {
            color: #666;
            margin-bottom: 30px;
            font-size: 1.1rem;
        }
        
        .test-section {
            margin-bottom: 40px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
            border-left: 4px solid #667eea;
        }
        
        .test-section h2 {
            color: #333;
            margin-bottom: 15px;
            font-size: 1.5rem;
        }
        
        .test-item {
            margin-bottom: 20px;
            padding: 15px;
            background: white;
            border-radius: 6px;
            border: 1px solid #e0e0e0;
        }
        
        .test-item h3 {
            color: #667eea;
            margin-bottom: 10px;
            font-size: 1.1rem;
        }
        
        .test-item p {
            color: #666;
            margin-bottom: 10px;
            line-height: 1.6;
        }
        
        .test-steps {
            background: #fff3cd;
            padding: 12px;
            border-radius: 6px;
            margin: 10px 0;
            border-left: 3px solid #ffc107;
        }
        
        .test-steps ol {
            margin-left: 20px;
            color: #856404;
        }
        
        .test-steps li {
            margin: 5px 0;
        }
        
        .status {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 0.85rem;
            font-weight: 600;
            margin-left: 10px;
        }
        
        .status.pending {
            background: #ffc107;
            color: #856404;
        }
        
        .status.passed {
            background: #28a745;
            color: white;
        }
        
        .status.failed {
            background: #dc3545;
            color: white;
        }
        
        .note {
            background: #d1ecf1;
            padding: 12px;
            border-radius: 6px;
            margin: 10px 0;
            border-left: 3px solid #0c5460;
            color: #0c5460;
        }
        
        .warning {
            background: #f8d7da;
            padding: 12px;
            border-radius: 6px;
            margin: 10px 0;
            border-left: 3px solid #721c24;
            color: #721c24;
        }
        
        .success {
            background: #d4edda;
            padding: 12px;
            border-radius: 6px;
            margin: 10px 0;
            border-left: 3px solid #155724;
            color: #155724;
        }
        
        .test-links {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            margin-top: 20px;
        }
        
        .test-link {
            display: inline-block;
            padding: 12px 24px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            text-decoration: none;
            border-radius: 6px;
            font-weight: 600;
            transition: transform 0.2s ease;
        }
        
        .test-link:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>üß™ Chat Features Test Guide</h1>
        <p class="subtitle">Comprehensive testing guide for all new chat features</p>
        
        <!-- Voice Input Test -->
        <div class="test-section">
            <h2>üé§ Test 1: Voice Input (Speech-to-Text)</h2>
            
            <div class="test-item">
                <h3>Test Voice Input Functionality <span class="status pending">PENDING</span></h3>
                <p><strong>What to test:</strong> Microphone button and speech recognition</p>
                <div class="test-steps">
                    <ol>
                        <li>Open the website homepage (<code>http://localhost:8000</code>)</li>
                        <li>Click the chat widget button (bottom-right corner)</li>
                        <li>Look for the microphone button (üé§) in the input area</li>
                        <li>Click the microphone button</li>
                        <li>Allow microphone access when prompted</li>
                        <li>Speak clearly into your microphone</li>
                        <li>Watch your words appear in the input field</li>
                        <li>Click the microphone button again to stop</li>
                    </ol>
                </div>
                <div class="note">
                    <strong>‚úÖ Expected Result:</strong> Your speech should be transcribed in real-time into the chat input field. The microphone button should turn red (üî¥) when listening.
                </div>
                <div class="warning">
                    <strong>‚ö†Ô∏è Browser Support:</strong> Voice input works best in Chrome and Edge. Safari requires webkit prefix. Firefox may not support it.
                </div>
            </div>
        </div>
        
        <!-- File Upload Chat Test -->
        <div class="test-section">
            <h2>üìé Test 2: File Upload in Chat Widget</h2>
            
            <div class="test-item">
                <h3>Test File Upload in Chat <span class="status pending">PENDING</span></h3>
                <p><strong>What to test:</strong> Uploading files through the chat widget</p>
                <div class="test-steps">
                    <ol>
                        <li>Open the chat widget</li>
                        <li>Look for the paperclip button (üìé) in the input area</li>
                        <li>Click the paperclip button</li>
                        <li>Select a PDF, DOC, DOCX, or TXT file (under 10MB)</li>
                        <li>Check that a file preview appears above the input</li>
                        <li>Type a message mentioning the file</li>
                        <li>Send the message</li>
                        <li>Verify the file upload message appears in chat</li>
                    </ol>
                </div>
                <div class="note">
                    <strong>‚úÖ Expected Result:</strong> File should upload successfully, and you should see a confirmation message. File preview should show file name and size.
                </div>
                <div class="warning">
                    <strong>‚ö†Ô∏è Test Cases:</strong>
                    <ul style="margin-left: 20px; margin-top: 5px;">
                        <li>Try uploading a file larger than 10MB (should show error)</li>
                        <li>Try uploading an unsupported file type (should show error)</li>
                        <li>Try removing the file from preview (should remove it)</li>
                    </ul>
                </div>
            </div>
        </div>
        
        <!-- File Upload Contact Test -->
        <div class="test-section">
            <h2>üìÑ Test 3: File Upload in Contact Form</h2>
            
            <div class="test-item">
                <h3>Test File Upload in Contact Form <span class="status pending">PENDING</span></h3>
                <p><strong>What to test:</strong> Uploading project files through contact form</p>
                <div class="test-steps">
                    <ol>
                        <li>Navigate to the contact page (<code>/pages/contact.html</code>)</li>
                        <li>Fill in your name and email</li>
                        <li>Scroll to the "Upload Project Files" section</li>
                        <li>Click "Choose Files" or the file input</li>
                        <li>Select one or more files (PDF, DOC, DOCX, TXT, XLS, XLSX, PPT, PPTX)</li>
                        <li>Verify file preview appears with file names and sizes</li>
                        <li>Fill in the message field</li>
                        <li>Submit the form</li>
                        <li>Check that success message appears</li>
                    </ol>
                </div>
                <div class="note">
                    <strong>‚úÖ Expected Result:</strong> Files should upload with the form, and you should receive a success message. Files will be included in the email notification.
                </div>
            </div>
        </div>
        
        <!-- Feedback Test -->
        <div class="test-section">
            <h2>‚≠ê Test 4: Feedback System</h2>
            
            <div class="test-item">
                <h3>Test Feedback Submission <span class="status pending">PENDING</span></h3>
                <p><strong>What to test:</strong> Rating the chat experience</p>
                <div class="test-steps">
                    <ol>
                        <li>Open the chat widget</li>
                        <li>Look for the "‚≠ê Rate this conversation" button in the actions bar</li>
                        <li>Click the feedback button</li>
                        <li>A modal should appear with 5 stars</li>
                        <li>Click on a star to select your rating (1-5)</li>
                        <li>Optionally, type a comment in the text area</li>
                        <li>Click "Submit feedback"</li>
                        <li>Verify you see a "Thank you for your feedback!" message</li>
                    </ol>
                </div>
                <div class="note">
                    <strong>‚úÖ Expected Result:</strong> Modal should appear, stars should highlight when clicked, and submission should show a thank you message.
                </div>
            </div>
        </div>
        
        <!-- Escalation Test -->
        <div class="test-section">
            <h2>üë§ Test 5: Escalation to Human Support</h2>
            
            <div class="test-item">
                <h3>Test Escalation Flow <span class="status pending">PENDING</span></h3>
                <p><strong>What to test:</strong> Escalating chat to human support</p>
                <div class="test-steps">
                    <ol>
                        <li>Open the chat widget</li>
                        <li>Have a conversation with the AI (ask a few questions)</li>
                        <li>Look for the "üë§ Escalate to human support" button in the actions bar</li>
                        <li>Click the escalation button</li>
                        <li>A confirmation dialog should appear</li>
                        <li>Click "Yes, connect me"</li>
                        <li>You should be redirected to the contact form</li>
                        <li>Check that the contact form message field is pre-filled with your chat conversation</li>
                        <li>Verify a blue notification banner appears explaining the pre-fill</li>
                    </ol>
                </div>
                <div class="note">
                    <strong>‚úÖ Expected Result:</strong> You should be redirected to the contact form, and your chat conversation should automatically appear in the message field.
                </div>
            </div>
        </div>
        
        <!-- Contact Form Pre-fill Test -->
        <div class="test-section">
            <h2>üí¨ Test 6: Contact Form Pre-fill</h2>
            
            <div class="test-item">
                <h3>Test Contact Form Pre-fill <span class="status pending">PENDING</span></h3>
                <p><strong>What to test:</strong> Automatic pre-filling of contact form from chat</p>
                <div class="test-steps">
                    <ol>
                        <li>Complete Test 5 (Escalation) first</li>
                        <li>After being redirected to contact form, verify:</li>
                        <li style="margin-left: 20px;">- Message field contains chat conversation</li>
                        <li style="margin-left: 20px;">- Blue notification banner is visible</li>
                        <li style="margin-left: 20px;">- Page auto-scrolled to message field</li>
                        <li style="margin-left: 20px;">- Message field is focused</li>
                        <li>Edit the pre-filled message if needed</li>
                        <li>Fill in your name and email</li>
                        <li>Submit the form</li>
                        <li>Verify the form submits successfully</li>
                    </ol>
                </div>
                <div class="note">
                    <strong>‚úÖ Expected Result:</strong> Contact form should be pre-filled with chat context, and you should be able to edit and submit it normally.
                </div>
            </div>
        </div>
        
        <!-- Integration Test -->
        <div class="test-section">
            <h2>üîó Test 7: Integration Test</h2>
            
            <div class="test-item">
                <h3>Test Complete User Flow <span class="status pending">PENDING</span></h3>
                <p><strong>What to test:</strong> Complete end-to-end user journey</p>
                <div class="test-steps">
                    <ol>
                        <li>Start a chat conversation</li>
                        <li>Use voice input to ask a question</li>
                        <li>Upload a file related to your question</li>
                        <li>Continue the conversation</li>
                        <li>Submit feedback (rate the experience)</li>
                        <li>Escalate to human support</li>
                        <li>Verify contact form is pre-filled</li>
                        <li>Add additional details to the message</li>
                        <li>Upload project files in contact form</li>
                        <li>Submit the contact form</li>
                    </ol>
                </div>
                <div class="success">
                    <strong>‚úÖ Complete Flow:</strong> This tests the entire user journey from chat to contact form submission with all features working together.
                </div>
            </div>
        </div>
        
        <!-- Quick Links -->
        <div class="test-section">
            <h2>üîó Quick Test Links</h2>
            <div class="test-links">
                <a href="http://localhost:8000" class="test-link" target="_blank">üè† Homepage (Chat Widget)</a>
                <a href="http://localhost:8000/pages/contact.html" class="test-link" target="_blank">üìß Contact Form</a>
                <a href="http://localhost:8000/pages/services.html" class="test-link" target="_blank">üõ†Ô∏è Services Page</a>
            </div>
        </div>
        
        <!-- Test Results -->
        <div class="test-section">
            <h2>üìä Test Results</h2>
            <p>Use this section to track your test results:</p>
            <div class="test-item">
                <h3>Test Checklist</h3>
                <div style="margin-top: 15px;">
                    <label style="display: block; margin: 10px 0;">
                        <input type="checkbox" style="margin-right: 8px;"> Voice Input (Speech-to-Text)
                    </label>
                    <label style="display: block; margin: 10px 0;">
                        <input type="checkbox" style="margin-right: 8px;"> File Upload in Chat Widget
                    </label>
                    <label style="display: block; margin: 10px 0;">
                        <input type="checkbox" style="margin-right: 8px;"> File Upload in Contact Form
                    </label>
                    <label style="display: block; margin: 10px 0;">
                        <input type="checkbox" style="margin-right: 8px;"> Feedback System
                    </label>
                    <label style="display: block; margin: 10px 0;">
                        <input type="checkbox" style="margin-right: 8px;"> Escalation to Human Support
                    </label>
                    <label style="display: block; margin: 10px 0;">
                        <input type="checkbox" style="margin-right: 8px;"> Contact Form Pre-fill
                    </label>
                    <label style="display: block; margin: 10px 0;">
                        <input type="checkbox" style="margin-right: 8px;"> Complete Integration Flow
                    </label>
                </div>
            </div>
        </div>
        
        <!-- Notes Section -->
        <div class="test-section">
            <h2>üìù Test Notes</h2>
            <div class="test-item">
                <h3>Issues Found</h3>
                <textarea id="test-notes" placeholder="Document any issues, bugs, or unexpected behavior here..." style="width: 100%; min-height: 150px; padding: 12px; border: 2px solid #e0e0e0; border-radius: 6px; font-family: inherit; font-size: 14px; resize: vertical;"></textarea>
            </div>
        </div>
        
        <!-- Server Status -->
        <div class="test-section">
            <h2>üñ•Ô∏è Server Status</h2>
            <div class="test-item">
                <p><strong>Server URL:</strong> <code>http://localhost:8000</code></p>
                <p><strong>Status:</strong> <span id="server-status">Checking...</span></p>
                <button onclick="checkServerStatus()" style="margin-top: 10px; padding: 8px 16px; background: #667eea; color: white; border: none; border-radius: 6px; cursor: pointer;">Check Server</button>
            </div>
        </div>
    </div>
    
    <script>
        // Check server status
        async function checkServerStatus() {
            const statusEl = document.getElementById('server-status');
            statusEl.textContent = 'Checking...';
            statusEl.style.color = '#ffc107';
            
            try {
                const response = await fetch('http://localhost:8000/api/contact', {
                    method: 'GET',
                    headers: { 'Content-Type': 'application/json' }
                });
                
                if (response.ok) {
                    statusEl.textContent = '‚úÖ Server is running';
                    statusEl.style.color = '#28a745';
                } else {
                    statusEl.textContent = '‚ö†Ô∏è Server responded with error';
                    statusEl.style.color = '#ffc107';
                }
            } catch (error) {
                statusEl.textContent = '‚ùå Server is not running or not accessible';
                statusEl.style.color = '#dc3545';
            }
        }
        
        // Auto-check server status on load
        window.addEventListener('load', () => {
            setTimeout(checkServerStatus, 500);
        });
        
        // Save test notes to localStorage
        const notesTextarea = document.getElementById('test-notes');
        const savedNotes = localStorage.getItem('chat-test-notes');
        if (savedNotes) {
            notesTextarea.value = savedNotes;
        }
        
        notesTextarea.addEventListener('input', () => {
            localStorage.setItem('chat-test-notes', notesTextarea.value);
        });
    </script>
</body>
</html>

